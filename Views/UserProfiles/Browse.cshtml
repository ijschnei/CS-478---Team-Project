@model IEnumerable<CS478_EventPlannerProject.Models.UserProfiles>
@{
	ViewData["Title"] = "Browse Profiles";
}

<h2>Browse User Profiles</h2>

<div class="mb-3">
	<a asp-action="Search" class="btn btn-primary">Search Profiles</a>
</div>

@if (Model != null && Model.Any())
{
	<div class="row">
		@foreach(var profile in Model)
		{
			<div class="col-md-4 mb-4">
				<div class="card">
					<div class="card-body">
						@if (!string.IsNullOrEmpty(profile.ProfileImageUrl))
						{
							<img src="@profile.ProfileImageUrl" alt="@profile.FullName" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px; object-fit: cover;"/>
						}
						else
						{
							<div class="bg-secondary rounded-circle mb-3 d-flex align-items-center justify-content-center" style="width: 100px; height: 100px;">
								<span class="text-white h3">@profile.FullName.Substring(0,1)</span>
							</div>
						}
						<h5 class="card-title">
							<a asp-action="View" asp-route-userId ="@profile.UserId">@profile.FullName</a>
						</h5>
						@if (!string.IsNullOrEmpty(profile.DisplayName))
						{
							<p class="text-muted">@profile.DisplayName</p>
						}
						@if (!string.IsNullOrEmpty(profile.Location)){
							<p class="text-muted">
								<i class="bi bi-geo-alt"></i> @profile.Location
							</p>
						}
						@if (!string.IsNullOrEmpty(profile.Bio))
						{
							<p class="card-text">
								@(profile.Bio.Length > 100 ? profile.Bio.Substring(0, 100) + "..." : profile.Bio)
							</p>
						}
						<a asp-action="View" asp-route-userId="@profile.UserId" class="btn btn-sm btn-outline-primary">View Profile</a>
					</div>
				</div>
			</div>
		}
	</div>
}
else
{
	<div class="alert alert-info">
		<p>No public profiles are available at this time.</p>
	</div>
}
<div class="mt-3">
	<a asp-action="Profile" class="btn btn-secondary">Back to My Profile</a>
</div>
